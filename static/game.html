<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Simple Crossy Road</title>
<style>
    body {
        margin: 0;
        background: #222;
        display: flex;
        justify-content: center;
    }
    canvas {
        background: #444;
        margin-top: 20px;
        border: 3px solid #fff;
    }
</style>
</head>
<body>

<canvas id="game" width="500" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = { x: 240, y: 460, size: 20, speed: 20 };
let cars = [];
let score = 0;

// ìë™ì°¨ ìƒì„±
function createCars() {
    cars = [];
    for (let i = 0; i < 5; i++) {
        cars.push({
            x: Math.random() * 500,
            y: i * 100,
            w: 60,
            h: 25,
            speed: 2 + Math.random() * 3
        });
    }
}
createCars();

// ìºë¦­í„° ì…ë ¥
let keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function movePlayer() {
    if (keys["ArrowUp"]) player.y -= player.speed;
    if (keys["ArrowDown"]) player.y += player.speed;
    if (keys["ArrowLeft"]) player.x -= player.speed;
    if (keys["ArrowRight"]) player.x += player.speed;

    // í™”ë©´ ë°– ë°©ì§€
    player.x = Math.max(0, Math.min(480, player.x));
    player.y = Math.max(0, Math.min(480, player.y));
}

// ì¶©ëŒ ì²´í¬
function checkCollision(a, b) {
    return (
        a.x < b.x + b.w &&
        a.x + a.size > b.x &&
        a.y < b.y + b.h &&
        a.y + a.size > b.y
    );
}

// ë©”ì¸ ë£¨í”„
function gameLoop() {
    ctx.clearRect(0,0,500,500);

    // í”Œë ˆì´ì–´
    ctx.fillStyle = "yellow";
    ctx.fillRect(player.x, player.y, player.size, player.size);

    // ìë™ì°¨
    ctx.fillStyle = "red";
    cars.forEach(car => {
        car.x += car.speed;
        if (car.x > 500) car.x = -60;

        ctx.fillRect(car.x, car.y, car.w, car.h);

        // ì¶©ëŒ ì²˜ë¦¬
        if (checkCollision(player, car)) {
            alert("ğŸš—ğŸ’¥ Game Over!\nScore: " + score);
            resetGame();
        }
    });

    // ë„ì°© ì§€ì  ì²´í¬
    if (player.y <= 0) {
        score++;
        alert("ğŸ‰ ì„±ê³µ! Score: " + score);
        resetGame();
    }

    movePlayer();
    requestAnimationFrame(gameLoop);
}

// ê²Œì„ ë¦¬ì…‹
function resetGame() {
    player.x = 240;
    player.y = 460;
    createCars();
}

gameLoop();
</script>

</body>
</html>
